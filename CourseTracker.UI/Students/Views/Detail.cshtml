@model VmStudent
@using CourseTracker.UI.Students.Models
@using CourseTracker.Application.SchoolYears.Queries.GetSchoolYearsList

@{

    string heading = Model.Id == null ? "Add New Student" : $"{Model.FirstName} {Model.LastName}";
    List<SchoolYearsListItemModel> schoolYears = Model.Id == null ? null : ViewBag.SchoolYears;

}

<h1>@heading</h1>

<form>

    @Html.AntiForgeryToken()

    @Html.HiddenFor(x => x.Id)

    @Html.EditorFor(x => x.FirstName, "Question", new { inputControl = Html.TextBoxFor(x => x.FirstName, new { @class = "form-control w-50" }) })

    @Html.EditorFor(x => x.LastName, "Question", new { inputControl = Html.TextBoxFor(x => x.LastName, new { @class = "form-control w-50" }) })

    @Html.EditorFor(x => x.ProgramName, "Question", new { inputControl = Html.TextBoxFor(x => x.ProgramName, new { @class = "form-control w-50" }) })

    <div class="mt-3">

        <input type="submit" value="Save" id="btnSave" class="btn btn-primary mr-2" formaction=@Url.Action("Detail", "Students")
                formmethod="post" />

        @Html.ActionLink("Cancel", "Index", "Students", null, new { @class = "btn btn-secondary" })

    </div>

</form>

@if (Model.Id != null)
{

    <div class="row mt-3">
        <div class="col-md-12">
            @Html.ActionLink("Add Year", "Detail", "Years", null, new { @class = "btn btn-primary" })
        </div>
    </div>
    
}